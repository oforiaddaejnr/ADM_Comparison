<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide Test Env</title>

    <!--CDM jquery (located online, so there is no need to manually download) --->
    <script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous">
    </script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>

   <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
   integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
   crossorigin=""></script>

   <script src="leaflet-side-by-side copy.js"></script>

   <style>
        #mapid { height: 400px; width: 600px; }
   </style>

</head>
<body>
    <h1>
        Testing Env for Slider
    </h1>
    <div id="mapid"> </div>
    <div id="options">
        <select id = "ISO" name="ISO" size=1>
            <option value="AFG">AFG</option>
            <option value="AGO">AGO</option>
            <option value="ALB">ALB</option>
            <option value="AND">AND</option>
            <option value="ARE">ARE</option>
            <option value="ARG">ARG</option>
            <option value="ARM">ARM</option>
            <option value="ATA">ATA</option>
            <option value="ATG">ATG</option>
            <option value="AUS">AUS</option>
            <option value="AUT">AUT</option>
            <option value="AZE">AZE</option>
            <option value="BDI">BDI</option>
            <option value="BEL">BEL</option>
            <option value="BEN">BEN</option>
            <option value="BFA">BFA</option>
            <option value="BGD">BGD</option>
            <option value="BGR">BGR</option>
            <option value="BHR">BHR</option>
            <option value="BHS">BHS</option>
            <option value="BIH">BIH</option>
            <option value="BLR">BLR</option>
            <option value="BLZ">BLZ</option>
            <option value="BOL">BOL</option>
            <option value="BRA">BRA</option>
            <option value="BRB">BRB</option>
            <option value="BRN">BRN</option>
            <option value="BTN">BTN</option>
            <option value="BWA">BWA</option>
            <option value="CAF">CAF</option>
            <option value="CAN">CAN</option>
            <option value="CHE">CHE</option>
            <option value="CHL">CHL</option>
            <option value="CHN">CHN</option>
            <option value="CIV">CIV</option>
            <option value="CMR">CMR</option>
            <option value="COD">COD</option>
            <option value="COG">COG</option>
            <option value="COL">COL</option>
            <option value="COM">COM</option>
            <option value="CPV">CPV</option>
            <option value="CRI">CRI</option>
            <option value="CUB">CUB</option>
            <option value="CYP">CYP</option>
            <option value="CZE">CZE</option>
            <option value="DEU">DEU</option>
            <option value="DJI">DJI</option>
            <option value="DMA">DMA</option>
            <option value="DNK">DNK</option>
            <option value="DOM">DOM</option>
            <option value="DZA">DZA</option>
            <option value="ECU">ECU</option>
            <option value="EGY">EGY</option>
            <option value="ERI">ERI</option>
            <option value="ESP">ESP</option>
            <option value="EST">EST</option>
            <option value="ETH">ETH</option>
            <option value="FIN">FIN</option>
            <option value="FJI">FJI</option>
            <option value="FRA">FRA</option>
            <option value="FSM">FSM</option>
            <option value="GAB">GAB</option>
            <option value="GBR">GBR</option>
            <option value="GEO">GEO</option>
            <option value="GHA">GHA</option>
            <option value="GIN">GIN</option>
            <option value="GMB">GMB</option>
            <option value="GNB">GNB</option>
            <option value="GNQ">GNQ</option>
            <option value="GRC">GRC</option>
            <option value="GRD">GRD</option>
            <option value="GRL">GRL</option>
            <option value="GTM">GTM</option>
            <option value="GUY">GUY</option>
            <option value="HND">HND</option>
            <option value="HRV">HRV</option>
            <option value="HTI">HTI</option>
            <option value="HUN">HUN</option>
            <option value="IDN">IDN</option>
            <option value="IND">IND</option>
            <option value="IRL">IRL</option>
            <option value="IRN">IRN</option>
            <option value="IRQ">IRQ</option>
            <option value="ISL">ISL</option>
            <option value="ISR">ISR</option>
            <option value="ITA">ITA</option>
            <option value="JAM">JAM</option>
            <option value="JOR">JOR</option>
            <option value="JPN">JPN</option>
            <option value="KAZ">KAZ</option>
            <option value="KEN">KEN</option>
            <option value="KGZ">KGZ</option>
            <option value="KHM">KHM</option>
            <option value="KIR">KIR</option>
            <option value="KNA">KNA</option>
            <option value="KOR">KOR</option>
            <option value="KWT">KWT</option>
            <option value="LAO">LAO</option>
            <option value="LBN">LBN</option>
            <option value="LBR">LBR</option>
            <option value="LBY">LBY</option>
            <option value="LCA">LCA</option>
            <option value="LIE">LIE</option>
            <option value="LKA">LKA</option>
            <option value="LSO">LSO</option>
            <option value="LTU">LTU</option>
            <option value="LUX">LUX</option>
            <option value="LVA">LVA</option>
            <option value="MAR">MAR</option>
            <option value="MCO">MCO</option>
            <option value="MDA">MDA</option>
            <option value="MDG">MDG</option>
            <option value="MDV">MDV</option>
            <option value="MEX">MEX</option>
            <option value="MHL">MHL</option>
            <option value="MKD">MKD</option>
            <option value="MLI">MLI</option>
            <option value="MLT">MLT</option>
            <option value="MMR">MMR</option>
            <option value="MNE">MNE</option>
            <option value="MNG">MNG</option>
            <option value="MOZ">MOZ</option>
            <option value="MRT">MRT</option>
            <option value="MUS">MUS</option>
            <option value="MWI">MWI</option>
            <option value="MYS">MYS</option>
            <option value="NAM">NAM</option>
            <option value="NER">NER</option>
            <option value="NGA">NGA</option>
            <option value="NIC">NIC</option>
            <option value="NIU">NIU</option>
            <option value="NLD">NLD</option>
            <option value="NOR">NOR</option>
            <option value="NPL">NPL</option>
            <option value="NRU">NRU</option>
            <option value="NZL">NZL</option>
            <option value="OMN">OMN</option>
            <option value="PAK">PAK</option>
            <option value="PAN">PAN</option>
            <option value="PER">PER</option>
            <option value="PHL">PHL</option>
            <option value="PLW">PLW</option>
            <option value="PNG">PNG</option>
            <option value="POL">POL</option>
            <option value="PRK">PRK</option>
            <option value="PRT">PRT</option>
            <option value="PRY">PRY</option>
            <option value="PSE">PSE</option>
            <option value="QAT">QAT</option>
            <option value="ROU">ROU</option>
            <option value="RUS">RUS</option>
            <option value="RWA">RWA</option>
            <option value="SAU">SAU</option>
            <option value="SDN">SDN</option>
            <option value="SEN">SEN</option>
            <option value="SGP">SGP</option>
            <option value="SLB">SLB</option>
            <option value="SLE">SLE</option>
            <option value="SLV">SLV</option>
            <option value="SMR">SMR</option>
            <option value="SOM">SOM</option>
            <option value="SRB">SRB</option>
            <option value="SSD">SSD</option>
            <option value="STP">STP</option>
            <option value="SUR">SUR</option>
            <option value="SVK">SVK</option>
            <option value="SVN">SVN</option>
            <option value="SWE">SWE</option>
            <option value="SWZ">SWZ</option>
            <option value="SYC">SYC</option>
            <option value="SYR">SYR</option>
            <option value="TCD">TCD</option>
            <option value="TGO">TGO</option>
            <option value="THA">THA</option>
            <option value="TJK">TJK</option>
            <option value="TKM">TKM</option>
            <option value="TLS">TLS</option>
            <option value="TON">TON</option>
            <option value="TTO">TTO</option>
            <option value="TUN">TUN</option>
            <option value="TUR">TUR</option>
            <option value="TUV">TUV</option>
            <option value="TWN">TWN</option>
            <option value="TZA">TZA</option>
            <option value="UGA">UGA</option>
            <option value="UKR">UKR</option>
            <option value="URY">URY</option>
            <option value="USA">USA</option>
            <option value="UZB">UZB</option>
            <option value="VAT">VAT</option>
            <option value="VCT">VCT</option>
            <option value="VEN">VEN</option>
            <option value="VNM">VNM</option>
            <option value="VUT">VUT</option>
            <option value="WSM">WSM</option>
            <option value="XKX">XKX</option>
            <option value="YEM">YEM</option>
            <option value="ZAF">ZAF</option>
            <option value="ZMB">ZMB</option>
            <option value="ZWE">ZWE</option>
        </select>
        <select id = "ADM" name="ADM" size=1>
            <option value="ADM0">ADM0</option>
            <option value="ADM1">ADM1</option>
            <option value="ADM2">ADM2</option>
        </select>
        <input type="button" id="map" value="Compare" />
    </div>
    

    
    <script>
        var mymap = L.map('mapid').setView([0, 0], 1);

        var leftPane = mymap.createPane('left');
        var rightPane = mymap.createPane('right');

        leftPane.style.zIndex = 230;
        rightPane.style.zIndex = 220;

        //leftlayer or map
        var attribution1 = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>';
        var tileUrl1 = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
        // added left pane
        var tiles1 = L.tileLayer(tileUrl1, {pane: 'left', attribution: attribution1}).addTo(mymap);

        //rightlayer or map
        var attribution2 = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>';
        var tileUrl2 = 'https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png';
        // added right pane
        var tiles2 = L.tileLayer(tileUrl2, {pane: 'right', attribution: attribution2}).addTo(mymap);
        L.control.sideBySide(tiles1, tiles2).addTo(mymap);
        $(document).ready(function(){
            var high_res;
            var low_res;
            var high_arr = [null];
            var low_arr = [null];
            $('select[name="ISO"]').change(function(){
                high_res = "https://www.geoboundaries.org/data/geoBoundaries-3_0_0/"+ $("#ISO").val() + "/" + $("#ADM").val() + "/geoBoundaries-3_0_0-"
                    + $("#ISO").val() + "-" + $("#ADM").val() + ".geojson";
                low_res = "https://www.geoboundaries.org/data/geoBoundariesSSCU-3_0_0/"+ $("#ISO").val() + "/"+$("#ADM").val()+"/geoBoundariesSSCU-3_0_0-"+ $("#ISO").val()
                 + "-"+$("#ADM").val()+".geojson"
            });

            $('select[name="ADM"]').change(function(){
                high_res = "https://www.geoboundaries.org/data/geoBoundaries-3_0_0/"+ $("#ISO").val() + "/" + $("#ADM").val() + "/geoBoundaries-3_0_0-"
                    + $("#ISO").val() + "-" + $("#ADM").val() + ".geojson";
                low_res = "https://www.geoboundaries.org/data/geoBoundariesSSCU-3_0_0/"+ $("#ISO").val() + "/"+$("#ADM").val()+"/geoBoundariesSSCU-3_0_0-"+ $("#ISO").val()
                 + "-"+$("#ADM").val()+".geojson"
            });
            
            $("#map").click(function(){
                // loading GeoJSON file unto mapL.map('mapid').setView([0, 0], 1);
               /* $.getJSON(high_res,function(data){
                    //if there is no stored reference to a previous 
                    //plotted geojson, map
                    if(high_arr[0] === null){
                    mapHighRes(data);
                    }
                    //else if there is a stored reference to a previous
                    //geojson, remove it before plotting the next one
                    else{
                        var removeLayer = high_arr[0].remove();
                        high_arr[0] = null
                        mapHighRes(data);
                    }
                }); */
                $.getJSON(low_res,function(data){
                    //if there is no stored reference to a previous 
                    //plotted geojson, map
                    if(low_arr[0] === null){
                    mapLowRes(data);
                    }
                    //else if there is a stored reference to a previous
                    //geojson, remove it before plotting the next one
                    else{
                        var removeLayer = low_arr[0].remove();
                        low_arr[0] = null
                        mapLowRes(data);
                    }
                });
            });

            /*//function to plot geojson file
            function mapHighRes(data){
                // added left pane
                var datalayer = L.geoJson(data, {pane: 'left'}).addTo(mymap);
                //Zoom to layer
                mymap.fitBounds(datalayer.getBounds());
                //store reference to plotted geojson
                high_arr[0] = datalayer;
            }*/

            //function to plot geojson file
            function mapLowRes(data){
                // added left pane
                var datalayer = L.geoJson(data, {pane: 'right'}).addTo(mymap);
                //Zoom to layer
                mymap.fitBounds(datalayer.getBounds());
                //store reference to plotted geojson
                high_arr[0] = datalayer;
            }
        });


        
    </script>
</body>
</html>